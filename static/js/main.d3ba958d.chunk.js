(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{12:function(e,t,c){e.exports={form:"card_edit_form_form__PkW6q",input:"card_edit_form_input__10NVf",textarea:"card_edit_form_textarea__3HmWN",select:"card_edit_form_select__1D3JM",button:"card_edit_form_button__3yWLx",fileInput:"card_edit_form_fileInput__ohTgo"}},34:function(e,t,c){e.exports={button:"button_button__2dOZs"}},40:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},49:function(e,t,c){},51:function(e,t,c){},62:function(e,t,c){"use strict";c.r(t);var a=c(11),n=c(2),r=c.n(n),s=c(31),i=c.n(s),l=c(22),o=c(4),u=(c(40),c(1)),d=function(e){var t=e.authService,c=Object(o.f)(),a=function(e){c.push({pathname:"/maker",state:{id:e}})},r=function(e){t.login(e.currentTarget.textContent).then((function(e){return a(e.user.uid)})),console.log(e.currentTarget.textContent)};return Object(n.useEffect)((function(){t.onAuthChange((function(e){e&&a(e.uid)}))})),Object(u.jsxs)("section",{class:"login-wrap",children:[Object(u.jsxs)("header",{className:"header",children:[Object(u.jsx)("img",{className:"logo",src:"/images/logo.png",alt:"logo"}),Object(u.jsx)("h4",{className:"title",children:"Business Card Maker"})]}),Object(u.jsxs)("section",{className:"login ",children:[Object(u.jsx)("h5",{className:"mb-3",children:"Login"}),Object(u.jsxs)("ul",{className:"list",children:[Object(u.jsx)("li",{className:"item",children:Object(u.jsx)("button",{onClick:r,children:"Google"})}),Object(u.jsx)("li",{className:"item",children:Object(u.jsx)("button",{onClick:r,children:"Github"})})]})]}),Object(u.jsx)("footer",{className:"footer",children:Object(u.jsx)("p",{className:"title",children:"Code your dream"})})]})},j=c(28),m=function(e){var t=e.FileInput,c=e.addCard,a=Object(n.useRef)(),r=Object(n.useRef)(),s=Object(n.useRef)(),i=Object(n.useRef)(),l=Object(n.useRef)(),o=Object(n.useRef)(),d=Object(n.useRef)();return Object(u.jsx)("form",{ref:a,children:Object(u.jsx)("ul",{className:"editor-list add-form",children:Object(u.jsxs)("li",{className:"item",children:[Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-4",children:Object(u.jsx)("input",{type:"text",className:"form-control",placeholder:"name",name:"name",ref:r})}),Object(u.jsx)("div",{className:"col-4",children:Object(u.jsx)("input",{type:"text",className:"form-control",placeholder:"company",name:"company",ref:s})}),Object(u.jsx)("div",{className:"col-4",children:Object(u.jsxs)("select",{name:"theme",ref:i,className:"form-select",children:[Object(u.jsx)("option",{value:"light",children:"light"}),Object(u.jsx)("option",{value:"dark",children:"dark"}),Object(u.jsx)("option",{value:"colorful",children:"colorful"})]})})]}),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-6",children:Object(u.jsx)("input",{type:"text",className:"form-control",placeholder:"title",name:"title",ref:l})}),Object(u.jsx)("div",{className:"col-6",children:Object(u.jsx)("input",{type:"text",className:"form-control",placeholder:"email",name:"email",ref:o})})]}),Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col-12",children:Object(u.jsx)("input",{type:"text",className:"form-control",placeholder:"message",name:"message",ref:d})})}),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-6",children:Object(u.jsx)("button",{type:"button",className:"btn btn-secondary",children:Object(u.jsx)(t,{})})}),Object(u.jsx)("div",{className:"col-6",children:Object(u.jsx)("button",{className:"btn btn-primary ",name:"Add",onClick:function(e){e.preventDefault();var t={id:Date.now(),name:r.current.value||"",company:s.current.value||"",theme:i.current.value,title:l.current.value||"",email:o.current.value||"",message:d.current.value||"",fileName:"",fileURL:""};a.current.reset(),c(t)},children:"add"})})]})]})})})},b=(c(46),c(23)),f=c(12),h=c.n(f),O=c(34),p=c.n(O),x=function(e){var t=e.name,c=e.onClick;return Object(u.jsx)("button",{className:p.a.button,onClick:c,children:t})},v=Object(n.memo)((function(e){var t=e.FileInput,c=e.card,r=e.updateCard,s=e.deleteCard,i=Object(n.useRef)(),l=Object(n.useRef)(),o=Object(n.useRef)(),d=Object(n.useRef)(),j=Object(n.useRef)(),m=Object(n.useRef)(),f=c.name,O=c.company,p=c.title,v=c.email,N=c.message,g=c.theme,y=c.fileName,C=function(e){null!=e.currentTarget&&(e.preventDefault(),r(Object(a.a)(Object(a.a)({},c),{},Object(b.a)({},e.currentTarget.name,e.currentTarget.value))))};return Object(u.jsxs)("form",{className:h.a.form,children:[Object(u.jsx)("input",{className:h.a.input,type:"text",name:"name",ref:i,value:f,onChange:C}),Object(u.jsx)("input",{className:h.a.input,type:"text",name:"company",ref:l,value:O,onChange:C}),Object(u.jsxs)("select",{className:h.a.select,name:"theme",ref:o,value:g,onChange:C,children:[Object(u.jsx)("option",{value:"light",children:"light"}),Object(u.jsx)("option",{value:"dark",children:"dark"}),Object(u.jsx)("option",{value:"colorful",children:"colorful"})]}),Object(u.jsx)("input",{className:h.a.input,type:"text",name:"title",ref:d,value:p,onChange:C}),Object(u.jsx)("input",{className:h.a.input,type:"text",name:"email",ref:j,value:v,onChange:C}),Object(u.jsx)("textarea",{className:h.a.textarea,ref:m,name:"message",value:N,onChange:C}),Object(u.jsx)("div",{className:h.a.fileInput,children:Object(u.jsx)(t,{name:y,onFileChange:function(e){r(Object(a.a)(Object(a.a)({},c),{},{fileName:e.name,fileURL:e.url}))}})}),Object(u.jsx)(x,{name:"Delete",onClick:function(){s(c)}})]})})),N=function(e){var t=e.FileInput,c=e.cards,a=e.addCard,n=e.updateCard,r=e.deleteCard;return Object(u.jsxs)("section",{className:"editor",children:[Object(u.jsx)("h3",{className:"title",children:"Card Maker"}),Object(u.jsx)("ul",{className:"editor-list",children:Object.keys(c).map((function(e){return Object(u.jsx)(v,{FileInput:t,card:c[e],updateCard:n,deleteCard:r},e)}))}),Object(u.jsx)("h4",{className:"title",children:"Add Card"}),Object(u.jsx)(m,{addCard:a,FileInput:t})]})};function g(e){switch(e){case"dark":return"dark";case"light":return"light";case"colorful":return"colorful"}}var y=function(e){var t=e.card,c=(t.name,t.company,t.title,t.email,t.message,t.theme,t.fileName,t.fileURL||"/images/default_logo.png");return Object(u.jsx)("li",{children:Object(u.jsx)("div",{className:"card ".concat(g(t.theme)),children:Object(u.jsxs)("div",{className:"d-flex",children:[Object(u.jsx)("div",{className:"card-thumb col-auto",children:Object(u.jsx)("img",{src:c,alt:"dprofile photo"})}),Object(u.jsxs)("div",{className:"card-text col",children:[Object(u.jsxs)("div",{className:"name-box",children:[Object(u.jsxs)("p",{className:"name h3",children:[" ",t.name]}),Object(u.jsx)("p",{children:t.company})]}),Object(u.jsxs)("div",{className:"des-box",children:[Object(u.jsx)("p",{children:t.title}),Object(u.jsx)("p",{children:t.email}),Object(u.jsx)("p",{children:t.message})]})]})]})})})},C=(c(47),function(e){var t=e.cards;return Object(u.jsxs)("section",{className:"preview",children:[Object(u.jsx)("h3",{className:"title",children:"Card Preview"}),Object(u.jsx)("ul",{className:"card-list",children:Object.keys(t).map((function(e){return Object(u.jsx)(y,{card:t[e]},e)}))})]})}),k=(c(48),function(e){var t=e.authService,c=e.FileInput,r=e.cardRepository,s=Object(o.f)(),i=Object(n.useState)({}),l=Object(j.a)(i,2),d=l[0],m=l[1],b=Object(n.useState)(s.location.state&&s.location.state.id),f=Object(j.a)(b,2),h=f[0],O=f[1],p=Object(n.useCallback)((function(){t.logout()}),[t]);Object(n.useEffect)((function(){if(h){var e=r.syncCards(h,(function(e){m(e)}));return function(){return e()}}}),[h,r]),Object(n.useEffect)((function(){t.onAuthChange((function(e){e?O(e.uid):s.push("/")}))}),[t,h,s]);var x=function(e){m((function(t){var c=Object(a.a)({},t);return c[e.id]=e,c})),r.saveCard(h,e)};return Object(u.jsxs)("section",{className:"maker",children:[Object(u.jsxs)("header",{className:"header",children:[p&&Object(u.jsx)("button",{className:"logout",onClick:p,children:"Logout"}),Object(u.jsx)("img",{className:"logo",src:"/images/logo.png",alt:"logo"}),Object(u.jsx)("h2",{className:"title",children:"Business Card Maker"})]}),Object(u.jsxs)("div",{className:"maker-wrap",children:[Object(u.jsx)(N,{FileInput:c,cards:d,addCard:x,updateCard:x,deleteCard:function(e){m((function(t){var c=Object(a.a)({},t);return delete c[e.id],c})),r.removeCard(h,e)}}),Object(u.jsx)(C,{cards:d})]}),Object(u.jsx)("footer",{className:"footer",children:Object(u.jsx)("p",{className:"title",children:"Code your dream"})})]})});c(49);var _=function(e){var t=e.FileInput,c=e.authService,a=e.cardRepository;return Object(u.jsx)("div",{className:"app",children:Object(u.jsx)(l.a,{children:Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{exact:!0,path:"/",children:Object(u.jsx)(d,{authService:c})}),Object(u.jsx)(o.a,{path:"/maker",children:Object(u.jsx)(k,{FileInput:t,authService:c,cardRepository:a})})]})})})},w=c(18),R=c.n(w),I=c(24),F=(c(51),function(e){var t=e.imageUploader,c=e.name,a=e.onFileChange,r=Object(n.useRef)(),s=function(){var e=Object(I.a)(R.a.mark((function e(c){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(c.target.files[0]),e.next=3,t.upload(c.target.files[0]);case 3:n=e.sent,console.log(n),a({name:n.original_filename,url:n.url});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"input-file-wrap",children:[Object(u.jsx)("input",{type:"file",ref:r,accept:"image/*",name:"file",className:"file-input",onChange:s}),Object(u.jsx)("button",{className:"btn-input-file btn btn-primary",onClick:function(e){e.preventDefault(),r.current.click()},children:c||"No file"})]})}),S=c(16),A=c(17),D=c(35),T=c.n(D).a.initializeApp({apiKey:"AIzaSyAZzatQMJTtyVdcRdKDZ0HWXHYldUU9HAE",authDomain:"business-card-maker-42cc6.firebaseapp.com",databaseURL:"https://business-card-maker-42cc6-default-rtdb.firebaseio.com",projectId:"business-card-maker-42cc6"}),U=T.auth(),L=T.database(),M=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,[{key:"login",value:function(e){var t=new(U["".concat(e,"AuthProvider")]);return U.signInWithPopup(t)}},{key:"logout",value:function(){U.signOut()}},{key:"onAuthChange",value:function(e){U.onAuthStateChanged((function(t){e(t)}))}}]),e}(),E=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,[{key:"upload",value:function(){var e=Object(I.a)(R.a.mark((function e(t){var c,a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=new FormData).append("file",t),c.append("upload_preset","qxagiyyw "),e.next=5,fetch("https://api.cloudinary.com/v1_1/manaddd/upload",{method:"POST",body:c});case 5:return a=e.sent,e.next=8,a.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),P=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,[{key:"syncCards",value:function(e,t){var c=L.ref("".concat(e,"/cards"));return c.on("value",(function(e){var c=e.val();c&&t(c)})),function(){return c.off()}}},{key:"saveCard",value:function(e,t){L.ref("".concat(e,"/cards/").concat(t.id)).set(t)}},{key:"removeCard",value:function(e,t){L.ref("".concat(e,"/cards/").concat(t.id)).remove()}}]),e}(),W=new M,H=new P,J=new E;i.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(_,{authService:W,FileInput:function(e){return Object(u.jsx)(F,Object(a.a)(Object(a.a)({},e),{},{imageUploader:J}))},cardRepository:H})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.d3ba958d.chunk.js.map